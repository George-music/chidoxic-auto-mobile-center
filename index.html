<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Chidoxic Auto Mobile Center</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <!-- Google Fonts for modern look -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
      background: #f7f8fa;
      color: #1a2233;
      min-height: 100vh;
    }
    .appbar {
      background: linear-gradient(90deg, #3167e6 50%, #1a2233 100%);
      color: #fff;
      padding: 0 24px;
      height: 62px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: 0 2px 10px rgba(49,103,230,0.08);
      font-weight: 600;
      position: sticky; top: 0; z-index: 10;
    }
    .appbar-title {
      font-size: 2rem;
      letter-spacing: 1.5px;
      font-weight: 800;
      text-shadow: 0 2px 6px rgba(49,103,230,0.09);
      display: flex;
      align-items: center;
    }
    .logo {
      width: 38px;
      height: 38px;
      margin-right: 12px;
      border-radius: 50%;
      object-fit: cover;
      background: #fff;
      border: 2px solid #3167e6;
    }
    .appbar-btns button {
      margin-left: 14px;
      background: rgba(255,255,255,0.10);
      border: none;
      color: #fff;
      font-size: 1.07rem;
      padding: 9px 18px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      transition: background .25s, transform .13s;
      outline: none;
      box-shadow: 0 2px 6px rgba(49,103,230,0.08);
    }
    .appbar-btns button:hover {
      background: #fff;
      color: #3167e6;
      transform: translateY(-2px) scale(1.05);
    }
    .main {
      max-width: 1180px;
      margin: 40px auto 32px auto;
      padding: 0 14px;
      display: flex;
      flex-direction: column;
      align-items: center;
      animation: fadein .7s cubic-bezier(.5, .1, .7, 1) 1;
    }
    /* Hero Section */
    .hero {
      width: 100%;
      background: linear-gradient(90deg, #e3ebff 70%, #f7f8fa 100%);
      border-radius: 14px;
      display: flex;
      gap: 48px;
      align-items: center;
      justify-content: space-between;
      padding: 40px 36px 38px 36px;
      margin-bottom: 30px;
      animation: slideDown .7s cubic-bezier(.5, .1, .7, 1);
    }
    .hero-content {
      flex: 1 1 350px;
    }
    .hero-title {
      font-size: 2.4rem;
      color: #3167e6;
      font-weight: 800;
      margin-bottom: 8px;
      line-height: 1.18;
    }
    .hero-desc {
      font-size: 1.14rem;
      color: #26314a;
      margin-bottom: 16px;
      font-weight: 500;
      line-height: 1.5;
    }
    .hero-action {
      background: #3167e6;
      color: #fff;
      font-weight: 700;
      font-size: 1.07rem;
      border: none;
      padding: 12px 28px;
      border-radius: 6px;
      box-shadow: 0 4px 14px rgba(49,103,230,0.13);
      cursor: pointer;
      transition: background .2s, transform .14s;
    }
    .hero-action:hover {
      background: #1a2233;
      color: #fff;
      transform: scale(1.07);
    }
    .hero-img {
      flex: 0 0 340px;
      min-width: 200px;
      text-align: right;
      animation: floatCar 3s infinite ease-in-out alternate;
    }
    .hero-img img {
      width: 320px;
      max-width: 100%;
      border-radius: 12px;
      box-shadow: 0 8px 32px 0 rgba(49,103,230,0.13);
    }
    @keyframes floatCar {
      0% { transform: translateY(0);}
      100% { transform: translateY(18px);}
    }
    @keyframes fadein {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-32px);}
      to { opacity: 1; transform: translateY(0);}
    }

    /* Car cards grid */
    .car-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(330px, 1fr));
      gap: 32px;
      width: 100%;
      margin-top: 8px;
    }
    .car-card {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(49,103,230,0.04), 0 1.5px 7px rgba(26,34,51,0.06);
      overflow: hidden;
      transition: box-shadow .25s, transform .15s;
      display: flex;
      flex-direction: column;
      position: relative;
      animation: fadein .8s cubic-bezier(.5, .1, .7, 1) both;
    }
    .car-card:hover {
      box-shadow: 0 12px 32px rgba(49,103,230,0.11), 0 3px 12px rgba(26,34,51,0.07);
      transform: translateY(-7px) scale(1.025);
    }
    .car-img {
      width: 100%;
      height: 196px;
      background: #e3ebff;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
    }
    .car-img img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform .7s cubic-bezier(.5,.1,.7,1);
    }
    .car-card:hover .car-img img {
      transform: scale(1.08) rotate(-1.3deg);
    }
    .car-content {
      padding: 22px 26px 18px 26px;
      flex: 1 1 auto;
      display: flex;
      flex-direction: column;
    }
    .car-title {
      font-size: 1.28rem;
      font-weight: 700;
      color: #26314a;
      margin: 0 0 4px 0;
      letter-spacing: .6px;
    }
    .car-model {
      font-size: 1.07rem;
      color: #3167e6;
      font-weight: 600;
      margin-bottom: 9px;
      letter-spacing: .5px;
    }
    .car-desc {
      color: #444e62;
      font-size: 1.01rem;
      flex: 1 1 auto;
      margin-bottom: 12px;
      opacity: .82;
      line-height: 1.5;
      transition: color .14s;
    }
    .car-price {
      font-size: 1.22rem;
      font-weight: 700;
      color: #1a2233;
      margin-bottom: 8px;
      letter-spacing: .3px;
      transition: color .13s;
    }
    .car-features {
      font-size: 0.97rem;
      color: #3167e6;
      margin-bottom: 7px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .car-features span {
      background: #e3ebff;
      color: #3167e6;
      font-weight: 500;
      border-radius: 5px;
      padding: 2px 10px;
      font-size: 0.97rem;
      margin-top: 2px;
      display: inline-block;
      transition: background .14s;
    }
    .car-action {
      margin-top: 10px;
      display: flex;
      align-items: center;
      justify-content: flex-end;
    }
    .car-action button {
      background: #3167e6;
      color: #fff;
      border: none;
      font-size: 1.02rem;
      font-weight: 700;
      padding: 10px 22px;
      border-radius: 6px;
      cursor: pointer;
      transition: background .2s, transform .14s;
      box-shadow: 0 2px 8px rgba(49,103,230,0.09);
    }
    .car-action button:hover {
      background: #1a2233;
      transform: scale(1.06);
    }
    /* Car Modal Animation */
    .modal-backdrop {
      position: fixed;
      left: 0; top: 0;
      width: 100vw; height: 100vh;
      background: rgba(26,34,51,0.18);
      z-index: 999;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: fadein .25s;
    }
    .modal {
      background: #fff;
      border-radius: 14px;
      min-width: 330px;
      max-width: 96vw;
      max-height: 93vh;
      overflow-y: auto;
      box-shadow: 0 12px 48px 0 rgba(49,103,230,0.16);
      animation: fadein .26s;
      padding: 34px 34px 28px 34px;
      position: relative;
    }
    .modal-close {
      position: absolute; top: 15px; right: 18px;
      font-size: 1.5rem;
      color: #3167e6;
      background: none; border: none; cursor: pointer;
      font-weight: 800;
      transition: color .17s;
    }
    .modal-close:hover { color: #e53935; }
    .modal-img {
      width: 100%; max-width: 440px; margin: 0 auto 24px auto; display: block; border-radius: 10px; box-shadow: 0 2px 12px rgba(49,103,230,0.13);
      animation: floatCar 3s infinite alternate;
    }
    .modal-title { font-size: 2rem; font-weight: 800; margin-bottom: 4px; color: #3167e6; }
    .modal-model { color: #26314a; font-size: 1.18rem; font-weight: 700; margin-bottom: 8px; }
    .modal-price { font-size: 1.33rem; font-weight: 700; color: #1a2233; margin-bottom: 8px; }
    .modal-desc { color: #444e62; font-size: 1.07rem; margin-bottom: 18px; }
    .modal-features { margin-bottom: 10px; }
    .modal-features span { background: #e3ebff; color: #3167e6; font-weight: 500; border-radius: 5px; padding: 2px 10px; font-size: 1.01rem; margin-right: 8px; margin-bottom: 5px; display: inline-block;}
    .modal-action { text-align: right; }
    .modal-action button { background: #3167e6; color: #fff; border: none; font-size: 1.09rem; font-weight: 700; padding: 10px 27px; border-radius: 7px; cursor: pointer; transition: background .2s, transform .14s; margin:0; }
    .modal-action button:hover { background: #26314a; }

    /* Admin Panel Styles */
    .admin-panel {
      width: 100%;
      max-width: 540px;
      margin: 40px auto 0 auto;
      padding: 32px 28px 28px 28px;
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 4px 18px rgba(49,103,230,0.07);
      display: none;
      flex-direction: column;
      gap: 18px;
    }
    .admin-panel.active { display: flex; }
    .admin-title { font-weight: 800; font-size: 1.3rem; margin-bottom: 12px; color: #3167e6;}
    .admin-form label { font-weight: 600; display: block; margin-top: 8px; }
    .admin-form input, .admin-form textarea {
      width: 100%; padding: 8px 10px; font-size: 1rem; border-radius: 6px; border: 1px solid #c7d1eb; margin-top: 3px;
    }
    .admin-form textarea { min-height: 54px; }
    .admin-form .admin-row { margin-bottom: 11px; }
    .admin-form button {
      background: #3167e6; color: #fff; font-weight: 700; padding: 10px 22px; border: none; border-radius: 6px; cursor: pointer;
      transition: background .17s;
    }
    .admin-form button:hover { background: #1a2233;}
    .admin-logout { margin-top: 12px; color: #e53935; background: none; border: none; cursor: pointer; font-weight: 700;}
    .admin-list { margin-top: 28px;}
    .admin-car-title { font-weight: 700; }
    .admin-msg { color: #e53935; margin-bottom: 7px; font-size: .98rem;}
    .hidden {display:none;}

    @media (max-width: 900px) {
      .hero { flex-direction: column; gap: 16px; padding: 32px 12px; }
      .hero-img { text-align: center;}
      .hero-img img { width: 260px;}
    }
    @media (max-width: 600px) {
      .main { padding: 0 2px; }
      .car-card { padding: 0;}
      .car-content { padding: 15px 10px 13px 10px;}
      .hero { padding: 18px 6px;}
      .hero-title { font-size: 1.3rem;}
      .hero-img img { width: 160px;}
      .modal { padding: 20px 5vw 16px 5vw;}
      .modal-title { font-size: 1.2rem;}
    }
  </style>
  <!-- Appwrite SDK -->
  <script src="https://cdn.jsdelivr.net/npm/appwrite@13.0.1"></script>
</head>
<body>
  <nav class="appbar">
    <span class="appbar-title">
      <img src="https://i.ibb.co/4W2DGKm/car-logo.png" class="logo" alt="Chidoxic Logo"/>
      Chidoxic Auto Mobile Center
    </span>
    <span class="appbar-btns">
      <button onclick="scrollToSection('gallery')">Browse Cars</button>
      <button onclick="showAbout()">About</button>
      <button onclick="showContact()">Contact</button>
      <button id="adminBtn" onclick="toggleAdminPanel()">Admin</button>
    </span>
  </nav>
  <main class="main">
    <section class="hero" id="hero">
      <div class="hero-content">
        <div class="hero-title">Find Your Dream Car</div>
        <div class="hero-desc">
          Explore a curated selection of the latest and greatest cars.<br>
          Modern UI. Smooth transitions. Details that matter.<br>
          <b>Discover your next ride today!</b>
        </div>
        <button class="hero-action" onclick="scrollToSection('gallery')">View Cars</button>
      </div>
      <div class="hero-img">
        <img src="https://images.unsplash.com/photo-1503736334956-4c8f8e92946d?auto=format&fit=crop&w=720&q=80" alt="Modern Car"/>
      </div>
    </section>
    <!-- Car Cards Section -->
    <section class="car-list" id="gallery"></section>
    <!-- Admin Panel -->
    <section class="admin-panel" id="adminPanel">
      <div class="admin-title">Admin Panel</div>
      <form class="admin-form" id="adminForm">
        <div class="admin-msg" id="adminMsg"></div>
        <div class="admin-row">
          <label for="carTitle">Title</label>
          <input type="text" id="carTitle" required>
        </div>
        <div class="admin-row">
          <label for="carModel">Model Year</label>
          <input type="text" id="carModel" required>
        </div>
        <div class="admin-row">
          <label for="carPrice">Price</label>
          <input type="text" id="carPrice" required>
        </div>
        <div class="admin-row">
          <label for="carDesc">Description</label>
          <textarea id="carDesc" required></textarea>
        </div>
        <div class="admin-row">
          <label for="carImage">Image URL</label>
          <input type="text" id="carImage" required>
        </div>
        <div class="admin-row">
          <label for="carFeatures">Features (comma separated)</label>
          <input type="text" id="carFeatures" required>
        </div>
        <button type="submit">Add Car</button>
      </form>
      <button class="admin-logout" id="adminLogout" onclick="logoutAdmin()">Logout</button>
      <div class="admin-list" id="adminList"></div>
    </section>
  </main>
  <!-- Modal -->
  <div id="modal-root"></div>
  <script>
    // --- Appwrite Config ---
    const APPWRITE_ENDPOINT = "https://fra.cloud.appwrite.io/v1";
    const APPWRITE_PROJECT = "684c13530011df315968";
    const APPWRITE_DB_ID = "684c1377001ab5d7cbc9";
    const APPWRITE_COLLECTION_ID = "684c138c000f8065661f";
    const ADMIN_EMAILS = ["admin1@email.com", "supremealpha04@gmail.com", "admin3@email.com"]; // Replace with your admin emails

    const client = new Appwrite.Client();
    client.setEndpoint(APPWRITE_ENDPOINT).setProject(APPWRITE_PROJECT);
    const account = new Appwrite.Account(client);
    const db = new Appwrite.Databases(client);

    // --- UI State ---
    let cars = [];
    let isAdmin = false;

    // --- Load Cars from Appwrite ---
    async function loadCars() {
      try {
        const res = await db.listDocuments(APPWRITE_DB_ID, APPWRITE_COLLECTION_ID, [Appwrite.Query.orderDesc("$createdAt")]);
        cars = res.documents;
        renderCars();
        renderAdminCarList();
      } catch (e) {
        document.getElementById('gallery').innerHTML = "<div style='color:#e53935;font-weight:700;'>Failed to load cars.</div>";
      }
    }

    // --- Render Car Cards ---
    function renderCars() {
      const gallery = document.getElementById('gallery');
      gallery.innerHTML = "";
      cars.forEach((car, idx) => {
        const delay = 0.08 * idx;
        const features = car.features ? (Array.isArray(car.features) ? car.features : car.features.split(',')) : [];
        const card = document.createElement('div');
        card.className = "car-card";
        card.style.animationDelay = delay + 's';
        card.innerHTML = `
          <div class="car-img"><img src="${car.image}" alt="${car.title}"></div>
          <div class="car-content">
            <div class="car-title">${car.title}</div>
            <div class="car-model">${car.model}</div>
            <div class="car-desc">${car.description.slice(0, 84)}...</div>
            <div class="car-features">${features.map(f => `<span>${f.trim()}</span>`).join('')}</div>
            <div class="car-price">${car.price}</div>
            <div class="car-action">
              <button onclick="showCarModal('${car.$id}')">View Details</button>
            </div>
          </div>
        `;
        gallery.appendChild(card);
      });
    }

    // --- Modal Logic ---
    function showCarModal(id) {
      const car = cars.find(c => c.$id === id);
      if (!car) return;
      const features = car.features ? (Array.isArray(car.features) ? car.features : car.features.split(',')) : [];
      const modalRoot = document.getElementById('modal-root');
      modalRoot.innerHTML = `
        <div class="modal-backdrop" onclick="closeModal(event)">
          <div class="modal" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeModal(event)" title="Close">&times;</button>
            <img class="modal-img" src="${car.image}" alt="${car.title}">
            <div class="modal-title">${car.title}</div>
            <div class="modal-model">Model Year: ${car.model}</div>
            <div class="modal-price">Price: ${car.price}</div>
            <div class="modal-features">${features.map(f => `<span>${f.trim()}</span>`).join(' ')}</div>
            <div class="modal-desc">${car.description}</div>
            <div class="modal-action">
              <button onclick="closeModal(event)">Close</button>
            </div>
          </div>
        </div>
      `;
      document.body.style.overflow = "hidden";
    }
    function closeModal(e) {
      document.getElementById('modal-root').innerHTML = "";
      document.body.style.overflow = "";
    }

    // --- Scroll to Section Smoothly ---
    function scrollToSection(id) {
      const el = document.getElementById(id);
      if (el) el.scrollIntoView({ behavior: "smooth", block: "start" });
    }

    // --- About & Contact ---
    function showAbout() {
      document.getElementById('modal-root').innerHTML = `
        <div class="modal-backdrop" onclick="closeModal(event)">
          <div class="modal" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeModal(event)">&times;</button>
            <div class="modal-title">About Chidoxic Auto Mobile Center</div>
            <div class="modal-desc" style="margin-bottom:18px;">
              <b>Chidoxic Auto Mobile Center</b> is a modern, animated, and responsive car dealership showcase. Browse a handpicked selection of the world's best cars, each presented with smooth UI transitions and info straight from the cloud database.
              <ul style="padding-left:20px; margin:0;">
                <li>Modern, clean design with smooth animations and transitions</li>
                <li>Detailed car info including price, model, features, and high-res images</li>
                <li>Powered by Appwrite backend</li>
                <li>Responsive and works on all devices</li>
              </ul>
            </div>
            <div class="modal-action"><button onclick="closeModal(event)">Close</button></div>
          </div>
        </div>
      `;
      document.body.style.overflow = "hidden";
    }
    function showContact() {
      document.getElementById('modal-root').innerHTML = `
        <div class="modal-backdrop" onclick="closeModal(event)">
          <div class="modal" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeModal(event)">&times;</button>
            <div class="modal-title">Contact Us</div>
            <div class="modal-desc" style="margin-bottom:16px;">
              <b>Looking for a car or need more details?</b> <br>
              Email: <a href="mailto:info@chidoxicauto.com" style="color:#3167e6;">info@chidoxicauto.com</a><br>
              Phone: <a href="tel:+1234567890" style="color:#3167e6;">+1 (234) 567-890</a><br>
              Location: 123 Dream Cars Blvd, Auto City, USA
            </div>
            <div class="modal-action"><button onclick="closeModal(event)">Close</button></div>
          </div>
        </div>
      `;
      document.body.style.overflow = "hidden";
    }

    // --- Admin Panel Logic ---
    function toggleAdminPanel() {
      if (isAdmin) {
        document.getElementById('adminPanel').classList.toggle('active');
      } else {
        showAdminLogin();
      }
    }
    function showAdminLogin() {
      document.getElementById('modal-root').innerHTML = `
        <div class="modal-backdrop" onclick="closeModal(event)">
          <div class="modal" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeModal(event)">&times;</button>
            <div class="modal-title">Admin Login</div>
            <form id="adminLoginForm" style="margin-top:17px;">
              <label>Email</label>
              <input type="email" id="adminEmail" required style="width:100%;padding:8px;border-radius:6px;border:1px solid #c7d1eb;">
              <label style="margin-top:8px;">Password</label>
              <input type="password" id="adminPassword" required style="width:100%;padding:8px;border-radius:6px;border:1px solid #c7d1eb;">
              <button style="margin-top:14px;width:100%;background:#3167e6;color:#fff;padding:10px;border:none;border-radius:6px;font-weight:700;cursor:pointer;">Login</button>
              <div id="loginMsg" style="color:#e53935;margin-top:8px;"></div>
            </form>
          </div>
        </div>
      `;
      document.body.style.overflow = "hidden";
      document.getElementById('adminLoginForm').onsubmit = async function(e) {
        e.preventDefault();
        const email = document.getElementById('adminEmail').value.trim();
        const password = document.getElementById('adminPassword').value;
        if (!ADMIN_EMAILS.includes(email)) {
          document.getElementById('loginMsg').innerText = "Not authorized.";
          return;
        }
        try {
          await account.createEmailSession(email, password);
          isAdmin = true;
          closeModal();
          document.getElementById('adminPanel').classList.add('active');
        } catch (err) {
          document.getElementById('loginMsg').innerText = "Login failed. Check email and password.";
        }
      }
    }
    async function logoutAdmin() {
      try { await account.deleteSession('current'); } catch {}
      isAdmin = false;
      document.getElementById('adminPanel').classList.remove('active');
    }

    // --- Admin Add Car Logic ---
    document.getElementById('adminForm').onsubmit = async function(e) {
      e.preventDefault();
      const title = document.getElementById('carTitle').value.trim();
      const model = document.getElementById('carModel').value.trim();
      const price = document.getElementById('carPrice').value.trim();
      const description = document.getElementById('carDesc').value.trim();
      const image = document.getElementById('carImage').value.trim();
      const features = document.getElementById('carFeatures').value.trim().split(',').map(f=>f.trim());
      if (!title || !model || !price || !description || !image || !features.length) {
        document.getElementById('adminMsg').innerText = "All fields are required.";
        return;
      }
      try {
        await db.createDocument(APPWRITE_DB_ID, APPWRITE_COLLECTION_ID, Appwrite.ID.unique(), { title, model, price, description, image, features });
        document.getElementById('adminMsg').innerText = "Car added successfully!";
        loadCars();
        this.reset();
      } catch {
        document.getElementById('adminMsg').innerText = "Failed to add car.";
      }
    }

    // --- Admin List of Cars (simple) ---
    function renderAdminCarList() {
      if (!isAdmin) return;
      let html = "<div style='margin-bottom:10px;font-weight:700;'>All Cars</div>";
      if (!cars.length) html += "<div>No cars found.</div>";
      else cars.forEach(car => {
        html += `<div class="admin-car-title">${car.title} (${car.model}) - <span style="color:#3167e6;">${car.price}</span></div>`;
      });
      document.getElementById('adminList').innerHTML = html;
    }

    // --- On Load: check session ---
    (async function(){
      try {
        const session = await account.get();
        if (session && ADMIN_EMAILS.includes(session.email)) {
          isAdmin = true;
          document.getElementById('adminPanel').classList.add('active');
        }
      } catch {}
      loadCars();
    })();
  </script>
</body>
</html>
